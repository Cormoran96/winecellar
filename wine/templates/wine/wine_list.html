{% extends "./base.html" %}
{% block content %}
<br>
Mein Weinkeller: <b>{{bottles_sum|default:"0"}}</b> Flaschen, {{wines_sum|default:"0"}} verschiedene Weine.<br><br>
<div class="input-group mb-3">
  <div class="input-group-prepend">
    <button class="btn btn-secondary" type="reset" id="button-addon1" onClick="window.location.reload()">Reset</button>
  </div>
  <input type="search" class="form-control"  id="wineSearch" placeholder="search&filter" onfocus="this.value=''" aria-label="Reset" aria-describedby="button-addon1">
</div>

<div class="table-responsive">
    <table class="table table-hover sortable" id="wineTable" >
      <thead>
        <tr>
            {% load static %}
          <th width="50" ><img src="{% static "wine/bootstrap/icons/search.svg" %}" alt="Detail" width="16" height="16" title="Detail"></th>
          <th style="cursor:pointer">Weinname</th>
          <th style="cursor:pointer">Produzent</th>
          <th style="cursor:pointer">Land</th>
          <th style="cursor:pointer">Region</th>
          <th style="cursor:pointer">Jahrgang</th>
          <th>Trauben</th>
          <th style="cursor:pointer">trinkbar von</th>
          <th style="cursor:pointer">trinkbar bis</th>
          <th style="cursor:pointer"><img src="{% static "wine/bootstrap/icons/basket-fill.svg" %}" alt="Detail" width="16" height="16" title="Detail"></th>
        </tr>
      </thead>
      <tbody>
{% for wine in object_list %}
        <tr>
{% load static %}
          <td>
              <details><summary></summary>
                            <h5>{{ wine.producer }}</h5>
                            <b>Jahrgang:</b> {{ wine.year }}<br>
                            <b>Trauben:</b> {{ wine.grapes|default_if_none:'' }}<br>
                            <b>Land:</b> {{ wine.country }}<br>
                            <b>Region:</b> {{ wine.region }}<br>
                            <b>Anzahl Flaschen:</b> {{ wine.nmbrbottles }}<br>
                            <b>Kaufdatum:</b> {{ wine.purchase|default_if_none:''|date:'d.m.Y'}}<br>
                            <b>Trinkreif von:</b> {{ wine.drinkfrom|default_if_none:'' }}<br>
                            <b>Trinkbar bis:</b> {{ wine.drinkto|default_if_none:'' }}<br>
                            <b>Händler:</b> {{ wine.dealer }}<br>
                            <b>Preis:</b> {{ wine.price }}<br>
                            <b>Notiz:</b><br>{{ wine.notes }}
                            <br><br>
                            <div class=&quot;dates&quot;>Update: {{ wine.editdate|date:"d.m.Y"}}
                            <br><br>
                            <a href="{% url 'wine:update_wine' wine.id %}" class="btn btn-info btn-sm">
                            <img src="{% static "wine/bootstrap/icons/screwdriver.svg" %}" alt="Edit" width="16" height="16" title="Edit">
                            </a>
                            <a href="{% url 'wine:wine_delete' wine.id %}" class="btn btn-info btn-sm">
                            <img src="{% static "wine/bootstrap/icons/trash-fill.svg" %}" alt="Löschen" width="16" height="16" title="Löschen">
                            </a>
                            '>
                            <img src="{% static "wine/bootstrap/icons/search.svg" %}" alt="Detail" width="16" height="16" title="Detail"></a>

              </details>


            <a tabindex="0" class="btn btn-sm btn-info" role="button" data-toggle="popover" data-trigger="focus" data-html="true" title="<h5>{{ wine.winename }}</h5>"
               data-content='
                            <h5>{{ wine.producer }}</h5>
                            <b>Jahrgang:</b> {{ wine.year }}<br>
                            <b>Trauben:</b> {{ wine.grapes|default_if_none:'' }}<br>
                            <b>Land:</b> {{ wine.country }}<br>
                            <b>Region:</b> {{ wine.region }}<br>
                            <b>Anzahl Flaschen:</b> {{ wine.nmbrbottles }}<br>
                            <b>Kaufdatum:</b> {{ wine.purchase|default_if_none:''|date:'d.m.Y'}}<br>
                            <b>Trinkreif von:</b> {{ wine.drinkfrom|default_if_none:'' }}<br>
                            <b>Trinkbar bis:</b> {{ wine.drinkto|default_if_none:'' }}<br>
                            <b>Händler:</b> {{ wine.dealer }}<br>
                            <b>Preis:</b> {{ wine.price }}<br>
                            <b>Notiz:</b><br>{{ wine.notes }}
                            <br><br>
                            <div class=&quot;dates&quot;>Update: {{ wine.editdate|date:"d.m.Y"}}
                            <br><br>
                            <a href="{% url 'wine:update_wine' wine.id %}" class="btn btn-info btn-sm">
                            <img src="{% static "wine/bootstrap/icons/screwdriver.svg" %}" alt="Edit" width="16" height="16" title="Edit">
                            </a>
                            <a href="{% url 'wine:wine_delete' wine.id %}" class="btn btn-info btn-sm">
                            <img src="{% static "wine/bootstrap/icons/trash-fill.svg" %}" alt="Löschen" width="16" height="16" title="Löschen">
                            </a>
                            '>
                            <img src="{% static "wine/bootstrap/icons/search.svg" %}" alt="Detail" width="16" height="16" title="Detail"></a>
          </td>
          <td>{{ wine.winename }}</td>
          <td>{{ wine.producer }}</td>
          <td>{{ wine.country }}</td>
          <td>{{ wine.region }}</td>
          <td>{{ wine.year|default_if_none:'' }}</td>
          <td>{{ wine.grapes }}</td>
          <td>{{ wine.drinkfrom|default_if_none:''}}</td>
          <td>{{ wine.drinkto|default_if_none:'' }}</td>
          <td>{{ wine.nmbrbottles }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
</div>
<!-- Scritps -->
<!-- search&filter -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script>
// search&filter
$(document).ready(function(){
  $("#wineSearch").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#wineTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script>
<script>
$(function () {
  $('[data-toggle="popover"]').popover({
    delay: {hide: 100}

  });
})
</script>

{% endblock %}
  </div>
</div>